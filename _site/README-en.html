<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=ed1eb7eddc566a676d27b57ede24c49e0046e5ed" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Rasa Boilerplate | rasa-ptbr-boilerplate</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Rasa Boilerplate" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Um template para criar um FAQ chatbot usando Rasa, Rocket.chat, elastic search" />
<meta property="og:description" content="Um template para criar um FAQ chatbot usando Rasa, Rocket.chat, elastic search" />
<link rel="canonical" href="http://localhost:4000/README-en.html" />
<meta property="og:url" content="http://localhost:4000/README-en.html" />
<meta property="og:site_name" content="rasa-ptbr-boilerplate" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Rasa Boilerplate" />
<script type="application/ld+json">
{"description":"Um template para criar um FAQ chatbot usando Rasa, Rocket.chat, elastic search","url":"http://localhost:4000/README-en.html","@type":"WebPage","headline":"Rasa Boilerplate","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1>rasa-ptbr-boilerplate</h1>
        </a>
        <h2>Um template para criar um FAQ chatbot usando Rasa, Rocket.chat, elastic search</h2>
        
          <a href="https://github.com/lappis-unb/rasa-ptbr-boilerplate" class="button"><small>View project on</small> GitHub</a>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1 id="rasa-boilerplate">Rasa Boilerplate</h1>
<!-- badges -->
<p><a href="https://www.gnu.org/licenses/gpl-3.0.pt-br.html"><img src="https://img.shields.io/badge/licence-GPL3-green.svg" /></a>
<a href="https://codeclimate.com/github/lappis-unb/rasa-ptbr-boilerplate/maintainability"><img src="https://api.codeclimate.com/v1/badges/3fe22bf52000e147c6df/maintainability" /></a></p>

<p>A project made in Rasa with the necessary configurations for the construction of a large chatbot project.</p>

<p>This project was based on <a href="http://github.com/lappis-unb/tais">Tais</a>.</p>

<h1 id="understand-the-architecture">Understand the Architecture</h1>

<p>Various technologies are used in boilerplate that interact with each other to obtain a better result. See the implemented architecture:</p>

<p><img src="https://user-images.githubusercontent.com/8556291/57933140-d8d66b80-7892-11e9-8d58-a7eda60b099b.png" alt="" /></p>

<p>The user interacts with Boilerplate via RocketChat or Telegram, which sends the messages to the Rasa NLU via
connectors, where it identifies the <em>intent</em>, and responds to the Rasa Core, according to <em>stories</em> and <em>actions</em>.
The <em>models</em> used for the conversation were generated by the <em>trainer</em> module and then transferred to the bot; these
models can be versioned and evolved between bots.
Notebooks evaluate the operation according to the format of <em>intents</em> and <em>stories</em>.
Elasticsearch collects data from the conversation and stores it for the analysis done by kibana, which generates charts for
evaluation of user conversations and boilerplate.</p>

<h2 id="bot">Bot</h2>

<p>This script has been configured to build the generic images needed to run this environment.
If your project uses this boilerplate and goes to perform continuous or similar integration, it is interesting
to create a repository for the images and replace the names of the “bot”, “coach” and “requirements” their respective new images, for example “<organization>/bot" in a public repository.</organization></p>

<h3 id="rocketchat">RocketChat</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker-compose up <span class="nt">-d</span> rocketchat
<span class="c"># wait 3 minutes for the rocketchat to finish rising</span>
<span class="nb">sudo </span>docker-compose up bot
</code></pre></div></div>

<p>For the virtual assistant to start the conversation, you must create a <code class="language-plaintext highlighter-rouge">trigger</code>.
To do this, enter the rocketchat as <code class="language-plaintext highlighter-rouge">admin</code>, and go to the Livechat panel at
In the Triggers section, click <code class="language-plaintext highlighter-rouge">New Trigger</code>. Fill in the Trigger as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Enabled</span><span class="pi">:</span> <span class="s">Yes</span>
<span class="na">Name</span><span class="pi">:</span> <span class="s">Start Talk</span>
<span class="na">Description</span><span class="pi">:</span> <span class="s">Start Talk</span>
<span class="na">Condition</span><span class="pi">:</span> <span class="s">Visitor time on site</span>
    <span class="s">Value</span><span class="pi">:</span> <span class="m">3</span>
<span class="na">Action</span><span class="pi">:</span> <span class="s">Send Message</span>
 <span class="s">Value</span><span class="pi">:</span> <span class="s">Impersonate next agent from queue</span>
 <span class="s">Value</span><span class="pi">:</span> <span class="s">Olá!</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">http://localhost:8080/</code> value should be the Bot access URL.</p>

<h4 id="installation">Installation</h4>

<p>To run the bot on a website you need to enter the following Javascript in your page</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--</span> <span class="nx">Start</span> <span class="k">of</span> <span class="nx">Rocket</span><span class="p">.</span><span class="nx">Chat</span> <span class="nx">Livechat</span> <span class="nx">Script</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text/javascript</span><span class="dl">"</span><span class="o">&gt;</span>
<span class="c1">// !!! Mudar para o seu host AQUI !!!</span>
<span class="nx">host</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://localhost:3000</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// !!! ^^^^^^^^^^^^^^^^^^^^^^^^^^ !!!</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">u</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">w</span><span class="p">.</span><span class="nx">RocketChat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span> <span class="nx">w</span><span class="p">.</span><span class="nx">RocketChat</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">};</span> <span class="nx">w</span><span class="p">.</span><span class="nx">RocketChat</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="p">[];</span> <span class="nx">w</span><span class="p">.</span><span class="nx">RocketChat</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">u</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
    <span class="nx">j</span><span class="p">.</span><span class="k">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="nx">j</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/packages/rocketchat_livechat/assets/rocketchat-livechat.min.js?_=201702160944</span><span class="dl">'</span><span class="p">;</span>
    <span class="nx">h</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
<span class="p">})(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">,</span> <span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/livechat</span><span class="dl">'</span><span class="p">);</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="c">&lt;!--</span> <span class="nx">End</span> <span class="k">of</span> <span class="nx">Rocket</span><span class="p">.</span><span class="nx">Chat</span> <span class="nx">Livechat</span> <span class="nx">Script</span> <span class="o">--&gt;</span>
</code></pre></div></div>

<p><strong>Attention</strong>: You need to change the <code class="language-plaintext highlighter-rouge">host</code> variable within the above code to the url of the site where you will be
your Rocket.Chat.</p>

<h3 id="telegram">Telegram</h3>

<p>To carry out this process, it is recommended to create a
<a href="https://core.telegram.org/bots#3-how-do-i-create-a-bot">Telegram Bot</a> to get all the necessary information.</p>

<p>To run the <em>stack</em> of the bot by the Telegram together with the attached services, it is necessary to comment the part
related to Rocket.Chat and uncomment the service related to the telegram bot.</p>

<p>After that, you need to use <a href="https://ngrok.com/download">ngrok</a> to expose a certain port to be used
by the Telegram.</p>

<p>When downloading, just run it using the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./ngrok http {used port}
</code></pre></div></div>

<p><strong>Attention:</strong> The Telegram connector is using port 5001 by default. If you want to change, just change
the port used by the in the Makefile.</p>

<p>When running, a link will be generated where it will be used to retrieve all information obtained by Bot’s webhook
by the Telegram, similar to this link:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Example:
https://283e291f.ngrok.io
</code></pre></div></div>

<p>Configure all necessary information in the docker-compose to integrate the created telegram bot:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="s">TELEGRAM_ACCESS_TOKEN={token from BotFather}</span>
<span class="pi">-</span> <span class="s">VERIFY={bot username}</span>
<span class="pi">-</span> <span class="s">WEBHOOK_URL={ngrok link}/webhooks/telegram/webhook</span>
</code></pre></div></div>

<p>To execute only the bot service for the telegram, use the following command:</p>

<p>If you have not yet trained your bot run the following command first:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make train
</code></pre></div></div>

<p><strong>Attention</strong>: the command “make train” run a container dock, in case I need sudo on your computer
To run the docking window, use the “sudo make train”.</p>

<p>Then run the bot on the telegram:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker-compose up telegram_bot
</code></pre></div></div>

<h3 id="console">Console</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make train
<span class="nb">sudo </span>docker-compose run <span class="nt">--rm</span> bot make run-console
</code></pre></div></div>

<h3 id="train-online">Train Online</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make train
sudo docker-compose run --rm coach make train-online
</code></pre></div></div>

<h2 id="analytics">Analytics</h2>

<h3 id="setup">Setup</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker-compose run --rm -v $PWD/analytics:/analytics bot python /analytics/setup_elastic.py
sudo docker-compose up -d elasticsearch
</code></pre></div></div>

<p>Remember to set the following environment variables in the <code class="language-plaintext highlighter-rouge">docker-compose</code> file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENVIRONMENT_NAME=localhost
BOT_VERSION=last-commit-hash
</code></pre></div></div>

<h3 id="preview">Preview</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker-compose up -d kibana
</code></pre></div></div>

<p>You can access kibana at <code class="language-plaintext highlighter-rouge">locahost:5601</code></p>

<h2 id="notebooks---data-analysis">Notebooks - Data Analysis</h2>

<h3 id="setup-1">Setup</h3>

<p>Lift the ‘notebooks’ container</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up <span class="nt">-d</span> notebooks
</code></pre></div></div>

<p>Access the notebook at <code class="language-plaintext highlighter-rouge">localhost:8888</code></p>

<h2 id="tutorial-to-support-the-entire-stack">Tutorial to support the entire stack</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker-compose up <span class="nt">-d</span> rocketchat

<span class="nb">sudo </span>docker-compose up <span class="nt">-d</span> kibana
<span class="nb">sudo </span>docker-compose run <span class="nt">--rm</span> <span class="nt">-v</span> <span class="nv">$PWD</span>/analytics:/analytics bot python/analytics/setup_elastic.py

<span class="nb">sudo </span>docker-compose up <span class="nt">-d</span> bot
</code></pre></div></div>

<h1 id="how-to-get-help">How to get help</h1>

<p>Part of the technical documentation for the Tais framework is
<a href="https://github.com/lappis-unb/tais/wiki">repository wiki</a>. If you can not find your answer, open an issue
with a <code class="language-plaintext highlighter-rouge">duvida</code> tag that we will try to respond to as quickly as possible.</p>

<p>If you have any questions regarding Rasa, please see the Telegram group <a href="https://t.me/RasaBrasil">Telegram Rasa Stack Brasil</a>,
we’re there to help too.</p>

<p>See more contact information on our website: https://lappis.rocks</p>

<h1 id="license">License</h1>

<p>The entire boilerplate framework is developed under license
<a href="https://github.com/lappis-unb/rasa-ptbr-boilerplate/blob/master/LICENSE">GPL3</a></p>

<p>See a list of license dependencies <a href="https://libraries.io/github/lappis-unb/rasa-ptbr-boilerplate">here</a></p>

        </section>

        <aside id="sidebar">
          

          
            <p class="repo-owner"><a href="https://github.com/lappis-unb/rasa-ptbr-boilerplate">rasa-ptbr-boilerplate</a> is maintained by <a href="https://github.com/lappis-unb">lappis-unb</a>.</p>
          
          
              <h2><a href="/">Home</a></h2>
                
          
              <h2><a href="/assets/css/style.css"></a></h2>
                
          
              <h2><a href="/assets/css/print.css"></a></h2>
                
          
              <h2><a href="/README-en.html">Rasa Boilerplate</a></h2>
                
          
              <h2><a href="/pipeline-de-qualidade.html">Qualidade do bot</a></h2>
                
          
              <h2><a href="/setup_analytics.html">Configuração da stack de analytics</a></h2>
                
          
              <h2><a href="/setup_telegram.html">Setup do bot no Telegram</a></h2>
                
          
              <h2><a href="/setup_user_elasticsearch.html">Configurando os usuários</a></h2>
                
          
              <h2><a href="/tutorial-add-bot-rocketchat.html">Adicionar bot ao RocketChat</a></h2>
                
          
              <h2><a href="/tutorial-como-contribuir-com-documentacao.html">Contribuir com a Documentação</a></h2>
                
          
              <h2><a href="/tutorial-como-criar-uma-action.html">Criação de Actions</a></h2>
                
          
              <h2><a href="/tutorial-como-fazer-uma-utter.html">Criação de Utter</a></h2>
                
          
              <h2><a href="/tutorial-como-treinar-o-modelo.html">Configuração da Policy do chatbot</a></h2>
                
          
              <h2><a href="/tutorial-criar-BI.html">Criação de visualizações no Kibana</a></h2>
                
          
              <h2><a href="/tutorial-pipeline-de-bot.html">Configuração pipeline de bot</a></h2>
                
          
              <h2><a href="/tutorial-primeira-conversa.html">Primeira Conversa</a></h2>
                
          
              <h2><a href="/tutorial-testes-automatizados.html">Criação de Testes Automatizados</a></h2>
                
          

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

    <script>!(function () {
    let e = document.createElement("script"),
      t = document.head || document.getElementsByTagName("head")[0];
    (e.src =
      "assets/1.0.1.min.js"),
      (e.async = !0),
      (e.onload = () => {
        window.WebChat.default(
          {
            customData: { language: "pt-br" },
            selector: "#webchat",
            initPayload: "/cumprimentar",
            socketUrl: "http://localhost:5007",
            socketPath: "/socket.io/",
            title: "Tais",
            inputTextFieldHint: "Digite sua mensagem...",
            connectingText: "Conectando...",
            hideWhenNotConnected: true,
            fullScreenMode: false,
            profileAvatar: "assets/images/bot.png",
            openLauncherImage: 'assets/images/launcher_button.svg',
            closeLauncherImage: 'assets/images/launcher_button.svg',
            params: {
                images: {
                    dims: {
                        width: 300,
                        height: 200,
                    }
                },
                storage: "session"
            }
          },
          null
        );
      }),
      t.insertBefore(e, t.firstChild);
    })();
    </script>

  </body>
</html>
